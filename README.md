# Minda Corp Project Tracker

Production-ready React + Google Apps Script project with username/password auth, role-based access, Google Sheets as database, and JSONP API calls to avoid CORS issues.

## Tech Stack
- Frontend: React + Vite + React Router (`/frontend`)
- Backend API: Google Apps Script Web App (`/apps-script/Code.gs`)
- Database: Single Google Spreadsheet with multiple tabs

## Features
- Hardcoded admin login:
  - username: `sonu`
  - password: `sonu1234`
- Admin role:
  - Create users
  - List users (without password exposure)
  - Create projects for any active user
  - View all projects and updates
  - Add project updates
- User role:
  - Login using user credentials from `users` sheet
  - Create projects only for self
  - View only own projects
  - Add updates only to own projects
- Session token auth (7-day expiry) with `sessions` sheet
- JSONP API integration to work across any frontend domain without CORS failures

## Folder Structure
```text
MindaCorp/
  apps-script/
    Code.gs
    appsscript.json
  frontend/
    .env.example
    src/
      api/
      auth/
      components/
      constants/
      pages/
```

## Google Sheet Setup
Create one Google Spreadsheet and keep these tabs with exact columns.

### 1) `users`
Columns (exact):
- `userId`
- `username`
- `password`
- `active`
- `createdAt`
- `lastLoginAt`
- `createdBy`

### 2) `projects`
Columns (exact):
- `projectId`
- `title`
- `description`
- `deadline`
- `assigneeUserId`
- `assigneeUsername`
- `createdByUserId`
- `createdByUsername`
- `createdAt`
- `statusLatest`

### 3) `project_updates`
Columns (exact):
- `updateId`
- `projectId`
- `assigneeUserId`
- `assigneeUsername`
- `remark`
- `createdAt`

### 4) `sessions`
Columns:
- `token`
- `userId`
- `username`
- `role`
- `createdAt`
- `expiresAt`

Notes:
- `users`/`projects`/`project_updates`/`sessions` are auto-created by backend if missing.
- Admin is hardcoded in backend and not required in `users` sheet.

## Backend Deployment (Google Apps Script)
1. Open [script.google.com](https://script.google.com) and create a new Apps Script project.
2. Add files from `/apps-script`:
- `Code.gs`
- `appsscript.json`
3. In `apps-script/Code.gs`, set:
- `APP_CONFIG.spreadsheetId = "YOUR_SPREADSHEET_ID"`
4. Save project.
5. Click **Deploy** -> **New deployment**.
6. Select type **Web app**.
7. Set:
- Execute as: **Me**
- Who has access: **Anyone**
8. Deploy and copy the Web App URL, format similar to:
- `https://script.google.com/macros/s/<DEPLOYMENT_ID>/exec`

## Frontend Setup
1. Go to frontend folder:
```bash
cd frontend
```
2. Create `.env` from example:
```bash
cp .env.example .env
```
(Windows PowerShell alternative)
```powershell
Copy-Item .env.example .env
```
3. Set Apps Script URL in `.env`:
```env
VITE_API_BASE_URL=https://script.google.com/macros/s/<DEPLOYMENT_ID>/exec
```
4. Install and run:
```bash
npm install
npm run dev
```
5. Build production assets:
```bash
npm run build
```

## API Behavior
All calls are made via JSONP through `doGet` with:
- `route`
- `payload` (JSON string)
- `callback` (auto-generated by frontend)

Implemented routes:
- `login`
- `createUser` (ADMIN)
- `listUsers` (ADMIN)
- `createProject`
- `getMyProjects`
- `getAllProjects` (ADMIN)
- `addProjectUpdate`
- `getProjectUpdates`

## Security Notes
- Password storage is plain text per requirement (commented in backend where hashing should be added later).
- Token sessions expire after 7 days.
- Protected routes validate role and token server-side.
- No delete routes are exposed.

## Frontend UI Notes
- Theme: light blue + white enterprise style
- Responsive dashboard layout
- Small premium buttons, cards, shadows, clean spacing
- Loading spinners and toast notifications on actions

## Quick Admin Login
- Username: `sonu`
- Password: `sonu1234`

